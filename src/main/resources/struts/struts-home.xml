<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN"
    "http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>
    <package name="identity" extends="default" namespace="/user">
        <interceptors>
            <!-- 身份選擇頁面使用的自訂攔截器堆疊 -->
            <interceptor-stack name="identityStack">
                <interceptor-ref name="modelDrivenStack" />
            </interceptor-stack>
        </interceptors>

        <!-- 設定預設攔截器為 identityStack -->
        <default-interceptor-ref name="identityStack" />

        <!-- 
            /user/choose 由 HomeAction 處理身份判斷 
        -->
        <action name="choose" class="com.example.action.HomeAction">
            <!-- 選擇一般會員時，導向會員登入頁 -->
            <result name="userLogin" type="redirect">/user/login.jsp</result>

            <!-- 選擇管理者時，導向管理員登入頁 -->
            <result name="adminLogin" type="redirect">/admin/login.jsp</result>

            <!-- 若未選擇，回到首頁（根目錄下的 home.jsp） -->
            <result name="input">/home.jsp</result>
        </action>
    </package>
</struts>
